#include <unistd.h>

// Функция для подсчета количества цифр в числе
int count_digits(int n) {
    int count = 0;
    if (n <= 0) {
        count = 1; // Добавляем одну цифру для знака минус, если число отрицательное или ноль
    }
    while (n != 0) {
        count++;
        n /= 10;
    }
    return count;
}

// Реализация функции ft_putnbr_fd
void ft_putnbr_fd(int n, int fd) {
    int num_digits = count_digits(n);

    // Выделяем память для строки, в которой будет представлено число
    char *str = (char *)malloc((num_digits + 1) * sizeof(char));
    if (str == NULL) {
        return; // Если выделение памяти не удалось
    }

    // Записываем знак минус, если число отрицательное
    if (n < 0) {
        str[0] = '-';
        n = -n;
    }

    // Заполняем строку цифрами числа (в обратном порядке)
    for (int i = num_digits - 1; i >= 0; i--) {
        str[i] = '0' + n % 10;
        n /= 10;
    }

    // Выводим строку в файловый дескриптор
    write(fd, str, num_digits);

    // Освобождаем выделенную память
    free(str);
}
